"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[625],{8625:function(e,t,o){o.r(t),o.d(t,{default:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"building"}},[t("div",{staticStyle:{height:"100vh",display:"flex","align-items":"center","justify-content":"center"},attrs:{id:"loginBox"}},[t("div",{staticStyle:{display:"flex",width:"35%","border-radius":"5px",overflow:"hidden",height:"60%"}},[t("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"center","background-color":"white"}},[t("el-form",{ref:"loginRef",staticStyle:{width:"70%"},attrs:{model:e.user,rules:e.rules}},[t("div",{staticStyle:{"font-size":"24px","font-weight":"bold","text-align":"center","margin-bottom":"20px"}},[e._v("欢迎登录后台管理系统")]),t("el-form-item",{attrs:{prop:"account"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",size:"medium",placeholder:"请输入账号"},model:{value:e.user.account,callback:function(t){e.$set(e.user,"account",t)},expression:"user.account"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-lock",size:"medium","show-password":"",placeholder:"请输入密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-form-item",{attrs:{prop:"code"}},[t("div",{staticStyle:{display:"flex"}},[t("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-circle-check",size:"medium"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),t("div",{staticStyle:{flex:"1",height:"36px"}},[t("valid-code",{on:{"update:value":e.getCode}})],1)],1)]),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登 录")])],1),t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1","text-align":"right"}},[t("span",{staticStyle:{color:"#0f9876",cursor:"pointer"},on:{click:e.handleForgetPass}},[e._v("忘记密码")])])])],1)],1)]),t("el-dialog",{attrs:{title:"忘记密码",visible:e.forgetPassDlalogVis,width:"30%"},on:{"update:visible":function(t){e.forgetPassDlalogVis=t}}},[t("el-form",{staticStyle:{"padding-right":"20px"},attrs:{model:e.forgetUserForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户账号"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户账号"},model:{value:e.forgetUserForm.account,callback:function(t){e.$set(e.forgetUserForm,"account",t)},expression:"forgetUserForm.account"}})],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入手机号"},model:{value:e.forgetUserForm.phone,callback:function(t){e.$set(e.forgetUserForm,"phone",t)},expression:"forgetUserForm.phone"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.forgetPassDlalogVis=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.resetPassword}},[e._v("确 定")])],1)],1)],1)])},s=[],a=(o(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"ValidCode disabled-select",staticStyle:{width:"100%",height:"100%"},on:{click:e.refreshCode}},e._l(e.codeList,(function(o,r){return t("span",{key:r,style:e.getStyle(o)},[e._v(e._s(o.code))])})),0)}),i=[],l={name:"validCode",data(){return{length:4,codeList:[]}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){let e=this.length,t=[],o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r=o.length;for(let s=0;s<e;s++){let e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,this.$emit("update:value",t.map((e=>e.code)).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},n=l,c=o(1001),d=(0,c.Z)(n,a,i,!1,null,null,null),u=d.exports,h={name:"Login",components:{ValidCode:u},data(){const e=(e,t,o)=>{""===t?o(new Error("请输入验证码")):t!==this.code?o(new Error("验证码错误")):o()};return{forgetUserForm:{},forgetPassDlalogVis:!1,code:"",user:{code:"",account:"",password:""},rules:{account:[{required:!0,message:"请输入用户账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{validator:e,trigger:"blur"}]}}},created(){if(/Android/i.test(navigator.userAgent)){const e=window.document.location.href,t=this.$route.path,o=e.indexOf(t),r=e.substring(0,o);window.location.replace(r+"/apk/app.apk")}},methods:{handleForgetPass(){this.forgetUserForm={},this.forgetPassDlalogVis=!0},resetPassword(){this.$request.put("/password",this.forgetUserForm).then((e=>{"200"===e.code?(this.$message.success("重置成功"),this.forgetPassDlalogVis=!1):this.$message.error(e.msg)}))},getCode(e){this.code=e},login(){this.$refs["loginRef"].validate((e=>{e&&this.$request.post("/login",this.user).then((e=>{"200"===e.code?(this.$router.push("/"),this.$message.success("登录成功"),localStorage.setItem("honey-user",JSON.stringify(e.data))):this.$message.error(e.msg)}))}))}}},f=h,p=(0,c.Z)(f,r,s,!1,null,"d7c1926c",null),g=p.exports}}]);
//# sourceMappingURL=625.cc90cf59.js.map